function t(t){return t&&t.__esModule?t.default:t}class e{constructor(t,e,r,i){this.x=t,this.y=e,this.width=r,this.height=i}}class r{constructor(t){this.event=t,this.rows=0,this.cols=0,this.rectangle=new e(0,r.minute(t.start),0,r.difference(t.start,t.end))}draw(t){return t(this)}overlaps(t){return this.rectangle.x<t.rectangle.x+t.rectangle.width&&this.rectangle.x+this.rectangle.width>t.rectangle.x&&this.rectangle.y<t.rectangle.y+t.rectangle.height&&this.rectangle.y+this.rectangle.height>t.rectangle.y}static difference(t,e){return(e.getTime()-t.getTime())/1e3/60}static minute(t){return(60*t.getHours()+t.getMinutes())%1440}}class i{constructor(t,e,r,i){this.events=r,this.width=t,this.height=e,this.instance=i(this.width,this.height,this.events)}draw(t){this.instance.process().forEach(e=>e.draw(t))}}class n{constructor(t,e){this.events=t,this.width=e,this.width=e,this.slots=t.map(t=>({...t,start:new Date(t.start),end:new Date(t.end)})).sort((t,e)=>t.start.getTime()-e.start.getTime()).sort((t,e)=>t.end.getTime()-e.end.getTime()).map(t=>new r(t)),this.matrix=this.#t(1440,this.slots.length)}process(){return this.slots.forEach((t,e)=>this.#e(this.matrix,t,e)),this.#r(),this.#i(),this.slots}#t(t,e){let r=[];for(let i=0;i<t;i++){r[i]=[];for(let t=0;t<e;t++)r[i][t]=null}return r}#e(t,e,i){let n=r.minute(e.event.start),s=r.minute(e.event.end);e.rows=s-n;for(let r=n;r<s;r++)t[r][i]=e}#r(){let t=0;for(let e=0;e<this.matrix.length;e++){let r=this.matrix[e].filter(t=>null!==t).length;this.matrix[e].filter(t=>null!==t).forEach(t=>t.cols=Math.max(t.cols,r)),r>t&&(t=r),r=0}return t}#i(){this.matrix.forEach((t,e)=>{let r=0;t.filter(t=>null!==t).forEach(t=>{t.rectangle.x=Math.max(r,t.rectangle.x),t.rectangle.width=this.width/t.cols,r+=t.rectangle.width})}),this.#n()}#n(){let t=this.matrix.length,e=this.matrix[0].length;for(let r=0;r<t;r++)for(let t=0;t<e;t++){let e=this.matrix[r][t];if(e){let i=e.rectangle.x,n=e.rectangle.width;for(let s=t-1;s>=0;s--){let t=this.matrix[r][s];if(null!==t&&e.overlaps(t)){console.log(t,e);let r=t.rectangle.x,s=t.rectangle.width,l=r+s,a=i+n;l>i&&(n=a-(i=l))}}e.rectangle.x=i,e.rectangle.width=n}}}}var s={};s=JSON.parse('[{"id":"1","start":"2023-06-13T09:00:00","end":"2023-06-13T09:35:00"},{"id":"4","start":"2023-06-13T09:35:00","end":"2023-06-13T10:00:00"}]');const l=document.getElementById("calendar"),a=document.getElementById("json");function h(t,e){t.innerHTML="",(calendar=new i(l.clientWidth,t.clientHeight,e,(t,e,r)=>new n(r,t))).draw(function(e){let r=()=>Math.floor(255*Math.random()),i=document.createElement("div");i.style.backgroundColor=`rgba(${r()}, ${r()}, ${r()}, 0.4)`,i.style.padding="2px 0px 0px 2px",i.style.position="absolute",i.style.boxSizing="border-box",i.style.left=`${e.rectangle.x}px`,i.style.top=`${e.rectangle.y}px`,i.style.width=`${e.rectangle.width}px`,i.style.height=`${e.rectangle.height}px`,i.style.border="0.5px solid",i.style.fontSize="12px",i.innerText=`${e.event.id} â†’ ${o(e.event.start)} to ${o(e.event.end)}`,t.append(i)})}function o(t){return`${t.getHours()}:${t.getMinutes()}`}a.value=JSON.stringify(t(s),null,2),h(l,t(s)),a.addEventListener("input",t=>{try{let e=JSON.parse(t.target.value);console.log(e.length),h(l,e)}catch(t){console.error(t)}});const c=document.getElementById("hours");for(let t=0;t<24;t++){let e=function(t){let e=document.createElement("div");return e.style.padding="2px 0px 0px 2px",e.style.height="60px",e.style.boxSizing="border-box",e.style.border="0.5px solid",e.innerText=`${t}:00`,e}(t<10?`0${t}`:t);c.append(e)}
//# sourceMappingURL=index.dac6f413.js.map
