{"mappings":"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","sources":["<anon>","src/main.js","node_modules/@hjco/layout-schedule/dist/src/index.js","node_modules/@hjco/layout-schedule/dist/src/event.js","node_modules/@hjco/layout-schedule/dist/src/layout/index.js","node_modules/@hjco/layout-schedule/dist/src/layout/matrix.js","src/input.json"],"sourcesContent":["function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nvar $45d520652af57c94$exports = {};\n\"use strict\";\nObject.defineProperty($45d520652af57c94$exports, \"__esModule\", {\n    value: true\n});\n$45d520652af57c94$exports.Matrix = $45d520652af57c94$exports.Rectangle = $45d520652af57c94$exports.Slot = $45d520652af57c94$exports.Calendar = void 0;\nvar $8450d819632f3ef6$exports = {};\n\"use strict\";\nObject.defineProperty($8450d819632f3ef6$exports, \"__esModule\", {\n    value: true\n});\n$8450d819632f3ef6$exports.Calendar = $8450d819632f3ef6$exports.Slot = $8450d819632f3ef6$exports.Rectangle = void 0;\nclass $8450d819632f3ef6$var$Rectangle {\n    constructor(x, y, width, height){\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n}\n$8450d819632f3ef6$exports.Rectangle = $8450d819632f3ef6$var$Rectangle;\nclass $8450d819632f3ef6$var$Slot {\n    constructor(event){\n        this.event = event;\n        this.rows = 0;\n        this.cols = 0;\n        this.rectangle = new $8450d819632f3ef6$var$Rectangle(0, $8450d819632f3ef6$var$Slot.minute(event.start), 0, $8450d819632f3ef6$var$Slot.difference(event.start, event.end));\n    }\n    draw(fn) {\n        return fn(this);\n    }\n    overlaps(other) {\n        return this.rectangle.x < other.rectangle.x + other.rectangle.width && this.rectangle.x + this.rectangle.width > other.rectangle.x && this.rectangle.y < other.rectangle.y + other.rectangle.height && this.rectangle.y + this.rectangle.height > other.rectangle.y;\n    }\n    static difference(start, end) {\n        return (end.getTime() - start.getTime()) / 1000 / 60;\n    }\n    static minute(date) {\n        return (date.getHours() * 60 + date.getMinutes()) % 1440;\n    }\n}\n$8450d819632f3ef6$exports.Slot = $8450d819632f3ef6$var$Slot;\nclass $8450d819632f3ef6$var$Calendar {\n    constructor(width, height, events, fn){\n        this.events = events;\n        this.width = width;\n        this.height = height;\n        this.instance = fn(this.width, this.height, this.events);\n    }\n    draw(fn) {\n        this.instance.process().forEach((slot)=>slot.draw(fn));\n    }\n}\n$8450d819632f3ef6$exports.Calendar = $8450d819632f3ef6$var$Calendar;\n\n\nObject.defineProperty($45d520652af57c94$exports, \"Calendar\", {\n    enumerable: true,\n    get: function() {\n        return $8450d819632f3ef6$exports.Calendar;\n    }\n});\nObject.defineProperty($45d520652af57c94$exports, \"Slot\", {\n    enumerable: true,\n    get: function() {\n        return $8450d819632f3ef6$exports.Slot;\n    }\n});\nObject.defineProperty($45d520652af57c94$exports, \"Rectangle\", {\n    enumerable: true,\n    get: function() {\n        return $8450d819632f3ef6$exports.Rectangle;\n    }\n});\nvar $7bb5aa3bacf8b622$exports = {};\n\"use strict\";\nObject.defineProperty($7bb5aa3bacf8b622$exports, \"__esModule\", {\n    value: true\n});\n$7bb5aa3bacf8b622$exports.Matrix = void 0;\nvar $b87b27850b3f4f82$exports = {};\n\"use strict\";\nvar $b87b27850b3f4f82$var$__classPrivateFieldGet = $b87b27850b3f4f82$exports && $b87b27850b3f4f82$exports.__classPrivateFieldGet || function(receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar $b87b27850b3f4f82$var$_Matrix_instances, $b87b27850b3f4f82$var$_Matrix_createMatrix, $b87b27850b3f4f82$var$_Matrix_initMatrix, $b87b27850b3f4f82$var$_Matrix_setColumns, $b87b27850b3f4f82$var$_Matrix_setVerticalPosition, $b87b27850b3f4f82$var$_Matrix_avoidOverlap;\nObject.defineProperty($b87b27850b3f4f82$exports, \"__esModule\", {\n    value: true\n});\n$b87b27850b3f4f82$exports.Matrix = void 0;\n\nconst $b87b27850b3f4f82$var$rows = 1440;\nclass $b87b27850b3f4f82$var$Matrix {\n    constructor(events, width){\n        $b87b27850b3f4f82$var$_Matrix_instances.add(this);\n        this.events = events;\n        this.width = width;\n        this.width = width;\n        this.slots = events.map((e)=>{\n            return Object.assign(Object.assign({}, e), {\n                start: new Date(e.start),\n                end: new Date(e.end)\n            });\n        }).sort((e1, e2)=>e1.start.getTime() - e2.start.getTime()).sort((e1, e2)=>e1.end.getTime() - e2.end.getTime()).map((e)=>new $45d520652af57c94$exports.Slot(e));\n        this.matrix = $b87b27850b3f4f82$var$__classPrivateFieldGet(this, $b87b27850b3f4f82$var$_Matrix_instances, \"m\", $b87b27850b3f4f82$var$_Matrix_createMatrix).call(this, $b87b27850b3f4f82$var$rows, this.slots.length);\n    }\n    process() {\n        this.slots.forEach((slot, i)=>$b87b27850b3f4f82$var$__classPrivateFieldGet(this, $b87b27850b3f4f82$var$_Matrix_instances, \"m\", $b87b27850b3f4f82$var$_Matrix_initMatrix).call(this, this.matrix, slot, i));\n        $b87b27850b3f4f82$var$__classPrivateFieldGet(this, $b87b27850b3f4f82$var$_Matrix_instances, \"m\", $b87b27850b3f4f82$var$_Matrix_setColumns).call(this);\n        $b87b27850b3f4f82$var$__classPrivateFieldGet(this, $b87b27850b3f4f82$var$_Matrix_instances, \"m\", $b87b27850b3f4f82$var$_Matrix_setVerticalPosition).call(this);\n        return this.slots;\n    }\n}\n$b87b27850b3f4f82$exports.Matrix = $b87b27850b3f4f82$var$Matrix;\n$b87b27850b3f4f82$var$_Matrix_instances = new WeakSet(), $b87b27850b3f4f82$var$_Matrix_createMatrix = function _Matrix_createMatrix(rows, cols) {\n    const matrix = [];\n    for(let i = 0; i < rows; i++){\n        matrix[i] = [];\n        for(let j = 0; j < cols; j++)matrix[i][j] = null;\n    }\n    return matrix;\n}, $b87b27850b3f4f82$var$_Matrix_initMatrix = function _Matrix_initMatrix(matrix, slot, i) {\n    const startDate = $45d520652af57c94$exports.Slot.minute(slot.event.start);\n    const endDate = $45d520652af57c94$exports.Slot.minute(slot.event.end);\n    slot.rows = endDate - startDate;\n    for(let t = startDate; t < endDate; t++)matrix[t][i] = slot;\n}, $b87b27850b3f4f82$var$_Matrix_setColumns = function _Matrix_setColumns() {\n    let maxCol = 0;\n    for(let i = 0; i < this.matrix.length; i++){\n        let count = this.matrix[i].filter((cell)=>cell !== null).length;\n        this.matrix[i].filter((slot)=>slot !== null).forEach((slot)=>slot.cols = Math.max(slot.cols, count));\n        if (count > maxCol) maxCol = count;\n        count = 0;\n    }\n    return maxCol;\n}, $b87b27850b3f4f82$var$_Matrix_setVerticalPosition = function _Matrix_setVerticalPosition() {\n    this.matrix.forEach((slots, i)=>{\n        let x = 0;\n        slots.filter((slot)=>slot !== null).forEach((slot)=>{\n            slot.rectangle.x = Math.max(x, slot.rectangle.x);\n            slot.rectangle.width = this.width / slot.cols;\n            x += slot.rectangle.width;\n        });\n    });\n    $b87b27850b3f4f82$var$__classPrivateFieldGet(this, $b87b27850b3f4f82$var$_Matrix_instances, \"m\", $b87b27850b3f4f82$var$_Matrix_avoidOverlap).call(this);\n}, $b87b27850b3f4f82$var$_Matrix_avoidOverlap = function _Matrix_avoidOverlap() {\n    const rows = this.matrix.length;\n    const cols = this.matrix[0].length;\n    for(let i = 0; i < rows; i++)for(let j = 0; j < cols; j++){\n        const slot = this.matrix[i][j];\n        if (slot) {\n            let x = slot.rectangle.x;\n            let width = slot.rectangle.width;\n            // Check if the current slot overlaps with any previous slots in the same row\n            for(let k = j - 1; k >= 0; k--){\n                const prevSlot = this.matrix[i][k];\n                if (prevSlot !== null && slot.overlaps(prevSlot)) {\n                    console.log(prevSlot, slot);\n                    const prevX = prevSlot.rectangle.x;\n                    const prevWidth = prevSlot.rectangle.width;\n                    const prevEnd = prevX + prevWidth;\n                    const currEnd = x + width;\n                    if (prevEnd > x) {\n                        // Adjust the horizontal position of the current slot to avoid overlap\n                        x = prevEnd;\n                        width = currEnd - x;\n                    }\n                }\n            }\n            slot.rectangle.x = x;\n            slot.rectangle.width = width;\n        }\n    }\n};\n\n\nObject.defineProperty($7bb5aa3bacf8b622$exports, \"Matrix\", {\n    enumerable: true,\n    get: function() {\n        return $b87b27850b3f4f82$exports.Matrix;\n    }\n});\n\n\nObject.defineProperty($45d520652af57c94$exports, \"Matrix\", {\n    enumerable: true,\n    get: function() {\n        return $7bb5aa3bacf8b622$exports.Matrix;\n    }\n});\n\n\nvar $b743b85e9e68452d$exports = {};\n$b743b85e9e68452d$exports = JSON.parse('[{\"id\":\"1\",\"start\":\"2023-06-13T09:00:00\",\"end\":\"2023-06-13T09:35:00\"},{\"id\":\"4\",\"start\":\"2023-06-13T09:35:00\",\"end\":\"2023-06-13T10:00:00\"}]');\n\n\nconst $2b6e161c9edcf319$var$calendarDiv = document.getElementById(\"calendar\");\nconst $2b6e161c9edcf319$var$inputTextarea = document.getElementById(\"json\");\n$2b6e161c9edcf319$var$inputTextarea.value = JSON.stringify((0, (/*@__PURE__*/$parcel$interopDefault($b743b85e9e68452d$exports))), null, 2);\n$2b6e161c9edcf319$var$drawCalendar($2b6e161c9edcf319$var$calendarDiv, (0, (/*@__PURE__*/$parcel$interopDefault($b743b85e9e68452d$exports))));\n$2b6e161c9edcf319$var$inputTextarea.addEventListener(\"input\", (e)=>{\n    try {\n        const input = JSON.parse(e.target.value);\n        console.log(input.length);\n        $2b6e161c9edcf319$var$drawCalendar($2b6e161c9edcf319$var$calendarDiv, input);\n    } catch (error) {\n        console.error(error);\n    }\n});\nfunction $2b6e161c9edcf319$var$drawCalendar(element, input) {\n    element.innerHTML = \"\";\n    const instance = (width, _, events)=>new (0, $45d520652af57c94$exports.Matrix)(events, width);\n    calendar = new (0, $45d520652af57c94$exports.Calendar)($2b6e161c9edcf319$var$calendarDiv.clientWidth, element.clientHeight, input, instance);\n    calendar.draw($2b6e161c9edcf319$var$drawSlots(element));\n}\nfunction $2b6e161c9edcf319$var$drawSlots(element) {\n    return function(slot) {\n        const randomColor = ()=>{\n            return Math.floor(Math.random() * 255);\n        };\n        const div = document.createElement(\"div\");\n        div.style.backgroundColor = `rgba(${randomColor()}, ${randomColor()}, ${randomColor()}, 0.4)`;\n        div.style.padding = \"2px 0px 0px 2px\";\n        div.style.position = \"absolute\";\n        div.style.boxSizing = \"border-box\";\n        div.style.left = `${slot.rectangle.x}px`;\n        div.style.top = `${slot.rectangle.y}px`;\n        div.style.width = `${slot.rectangle.width}px`;\n        div.style.height = `${slot.rectangle.height}px`;\n        div.style.border = \"0.5px solid\";\n        div.style.fontSize = \"12px\";\n        div.innerText = `${slot.event.id} → ${$2b6e161c9edcf319$var$dateToString(slot.event.start)} to ${$2b6e161c9edcf319$var$dateToString(slot.event.end)}`;\n        element.append(div);\n    };\n}\nfunction $2b6e161c9edcf319$var$dateToString(date) {\n    return `${date.getHours()}:${date.getMinutes()}`;\n}\n// Side hours panel\nconst $2b6e161c9edcf319$var$hoursDiv = document.getElementById(\"hours\");\nfor(let i = 0; i < 24; i++){\n    let hour = i < 10 ? `0${i}` : i;\n    let div = $2b6e161c9edcf319$var$getHourDiv(hour);\n    $2b6e161c9edcf319$var$hoursDiv.append(div);\n}\nfunction $2b6e161c9edcf319$var$getHourDiv(hour) {\n    const div = document.createElement(\"div\");\n    div.style.padding = \"2px 0px 0px 2px\";\n    div.style.height = `60px`;\n    div.style.boxSizing = \"border-box\";\n    div.style.border = \"0.5px solid\";\n    div.innerText = `${hour}:00`;\n    return div;\n}\n\n\n//# sourceMappingURL=index.fa792929.js.map\n","import {Calendar, Matrix} from '@hjco/layout-schedule'\r\nimport data from './input.json'\r\n\r\nconst calendarDiv = document.getElementById(\"calendar\");\r\nconst inputTextarea = document.getElementById(\"json\");\r\ninputTextarea.value = JSON.stringify(data, null, 2);\r\ndrawCalendar(calendarDiv, data);\r\n\r\ninputTextarea.addEventListener(\"input\", (e) => {\r\n    try {\r\n        const input = JSON.parse(e.target.value);\r\n        console.log(input.length);\r\n        drawCalendar(calendarDiv, input);\r\n    } catch (error) {\r\n        console.error(error);\r\n    }\r\n});\r\n\r\nfunction drawCalendar(element, input) {\r\n    element.innerHTML = '';\r\n    const instance = (width, _, events) => new Matrix(events, width);\r\n    calendar = new Calendar(calendarDiv.clientWidth, element.clientHeight, input, instance);\r\n    calendar.draw(drawSlots(element));\r\n}\r\n\r\nfunction drawSlots(element) {\r\n    \r\n    return function (slot) {\r\n        const randomColor = () => {\r\n            return Math.floor(Math.random() * 255)\r\n        }\r\n        const div = document.createElement(\"div\")\r\n        div.style.backgroundColor = `rgba(${randomColor()}, ${randomColor()}, ${randomColor()}, 0.4)`;\r\n        div.style.padding = '2px 0px 0px 2px';\r\n        div.style.position = 'absolute';\r\n        div.style.boxSizing = 'border-box';\r\n        div.style.left = `${slot.rectangle.x}px`;\r\n        div.style.top = `${slot.rectangle.y}px`;\r\n        div.style.width = `${slot.rectangle.width}px`;\r\n        div.style.height = `${slot.rectangle.height}px`;\r\n        div.style.border = '0.5px solid';\r\n        div.style.fontSize = '12px'\r\n        div.innerText = `${slot.event.id} → ${dateToString(slot.event.start)} to ${dateToString(slot.event.end)}`;\r\n    \r\n        element.append(div);\r\n    }\r\n}\r\n\r\n\r\nfunction dateToString(date) {\r\n    return `${date.getHours()}:${date.getMinutes()}`;\r\n}\r\n\r\n// Side hours panel\r\n\r\nconst hoursDiv = document.getElementById(\"hours\");\r\n\r\nfor (let i = 0; i < 24; i++) {\r\n    let hour = i < 10 ? `0${i}` : i;\r\n    let div = getHourDiv(hour);\r\n    hoursDiv.append(div); \r\n}\r\n\r\nfunction getHourDiv(hour) {\r\n    const div = document.createElement(\"div\")\r\n    div.style.padding = '2px 0px 0px 2px';\r\n    div.style.height = `60px`;\r\n    div.style.boxSizing = 'border-box';\r\n    div.style.border = '0.5px solid';\r\n    div.innerText = `${hour}:00`;\r\n    return div;\r\n}","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Matrix = exports.Rectangle = exports.Slot = exports.Calendar = void 0;\r\nvar event_1 = require(\"./event\");\r\nObject.defineProperty(exports, \"Calendar\", { enumerable: true, get: function () { return event_1.Calendar; } });\r\nObject.defineProperty(exports, \"Slot\", { enumerable: true, get: function () { return event_1.Slot; } });\r\nObject.defineProperty(exports, \"Rectangle\", { enumerable: true, get: function () { return event_1.Rectangle; } });\r\nvar layout_1 = require(\"./layout\");\r\nObject.defineProperty(exports, \"Matrix\", { enumerable: true, get: function () { return layout_1.Matrix; } });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Calendar = exports.Slot = exports.Rectangle = void 0;\r\nclass Rectangle {\r\n    constructor(x, y, width, height) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n}\r\nexports.Rectangle = Rectangle;\r\nclass Slot {\r\n    constructor(event) {\r\n        this.event = event;\r\n        this.rows = 0;\r\n        this.cols = 0;\r\n        this.rectangle = new Rectangle(0, Slot.minute(event.start), 0, Slot.difference(event.start, event.end));\r\n    }\r\n    draw(fn) {\r\n        return fn(this);\r\n    }\r\n    overlaps(other) {\r\n        return ((this.rectangle.x < other.rectangle.x + other.rectangle.width) &&\r\n            (this.rectangle.x + this.rectangle.width > other.rectangle.x) &&\r\n            (this.rectangle.y < other.rectangle.y + other.rectangle.height) &&\r\n            (this.rectangle.y + this.rectangle.height > other.rectangle.y));\r\n    }\r\n    static difference(start, end) {\r\n        return (end.getTime() - start.getTime()) / 1000 / 60;\r\n    }\r\n    static minute(date) {\r\n        return (date.getHours() * 60 + date.getMinutes()) % 1440;\r\n    }\r\n}\r\nexports.Slot = Slot;\r\nclass Calendar {\r\n    constructor(width, height, events, fn) {\r\n        this.events = events;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.instance = fn(this.width, this.height, this.events);\r\n    }\r\n    draw(fn) {\r\n        this.instance.process()\r\n            .forEach(slot => slot.draw(fn));\r\n    }\r\n}\r\nexports.Calendar = Calendar;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Matrix = void 0;\r\nvar matrix_1 = require(\"./matrix\");\r\nObject.defineProperty(exports, \"Matrix\", { enumerable: true, get: function () { return matrix_1.Matrix; } });\r\n","\"use strict\";\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n};\r\nvar _Matrix_instances, _Matrix_createMatrix, _Matrix_initMatrix, _Matrix_setColumns, _Matrix_setVerticalPosition, _Matrix_avoidOverlap;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Matrix = void 0;\r\nconst __1 = require(\"../\");\r\nconst rows = 1440;\r\nclass Matrix {\r\n    constructor(events, width) {\r\n        _Matrix_instances.add(this);\r\n        this.events = events;\r\n        this.width = width;\r\n        this.width = width;\r\n        this.slots = events.map(e => {\r\n            return Object.assign(Object.assign({}, e), { start: new Date(e.start), end: new Date(e.end) });\r\n        }).sort((e1, e2) => e1.start.getTime() - e2.start.getTime())\r\n            .sort((e1, e2) => e1.end.getTime() - e2.end.getTime())\r\n            .map(e => new __1.Slot(e));\r\n        this.matrix = __classPrivateFieldGet(this, _Matrix_instances, \"m\", _Matrix_createMatrix).call(this, rows, this.slots.length);\r\n    }\r\n    process() {\r\n        this.slots.forEach((slot, i) => __classPrivateFieldGet(this, _Matrix_instances, \"m\", _Matrix_initMatrix).call(this, this.matrix, slot, i));\r\n        __classPrivateFieldGet(this, _Matrix_instances, \"m\", _Matrix_setColumns).call(this);\r\n        __classPrivateFieldGet(this, _Matrix_instances, \"m\", _Matrix_setVerticalPosition).call(this);\r\n        return this.slots;\r\n    }\r\n}\r\nexports.Matrix = Matrix;\r\n_Matrix_instances = new WeakSet(), _Matrix_createMatrix = function _Matrix_createMatrix(rows, cols) {\r\n    const matrix = [];\r\n    for (let i = 0; i < rows; i++) {\r\n        matrix[i] = [];\r\n        for (let j = 0; j < cols; j++) {\r\n            matrix[i][j] = null;\r\n        }\r\n    }\r\n    return matrix;\r\n}, _Matrix_initMatrix = function _Matrix_initMatrix(matrix, slot, i) {\r\n    const startDate = __1.Slot.minute(slot.event.start);\r\n    const endDate = __1.Slot.minute(slot.event.end);\r\n    slot.rows = endDate - startDate;\r\n    for (let t = startDate; t < endDate; t++) {\r\n        matrix[t][i] = slot;\r\n    }\r\n}, _Matrix_setColumns = function _Matrix_setColumns() {\r\n    let maxCol = 0;\r\n    for (let i = 0; i < this.matrix.length; i++) {\r\n        let count = this.matrix[i].filter(cell => cell !== null).length;\r\n        this.matrix[i]\r\n            .filter(slot => slot !== null)\r\n            .forEach(slot => slot.cols = Math.max(slot.cols, count));\r\n        if (count > maxCol)\r\n            maxCol = count;\r\n        count = 0;\r\n    }\r\n    return maxCol;\r\n}, _Matrix_setVerticalPosition = function _Matrix_setVerticalPosition() {\r\n    this.matrix.forEach((slots, i) => {\r\n        let x = 0;\r\n        slots\r\n            .filter(slot => slot !== null)\r\n            .forEach(slot => {\r\n            slot.rectangle.x = Math.max(x, slot.rectangle.x);\r\n            slot.rectangle.width = this.width / slot.cols;\r\n            x += slot.rectangle.width;\r\n        });\r\n    });\r\n    __classPrivateFieldGet(this, _Matrix_instances, \"m\", _Matrix_avoidOverlap).call(this);\r\n}, _Matrix_avoidOverlap = function _Matrix_avoidOverlap() {\r\n    const rows = this.matrix.length;\r\n    const cols = this.matrix[0].length;\r\n    for (let i = 0; i < rows; i++) {\r\n        for (let j = 0; j < cols; j++) {\r\n            const slot = this.matrix[i][j];\r\n            if (slot) {\r\n                let x = slot.rectangle.x;\r\n                let width = slot.rectangle.width;\r\n                // Check if the current slot overlaps with any previous slots in the same row\r\n                for (let k = j - 1; k >= 0; k--) {\r\n                    const prevSlot = this.matrix[i][k];\r\n                    if (prevSlot !== null && slot.overlaps(prevSlot)) {\r\n                        console.log(prevSlot, slot);\r\n                        const prevX = prevSlot.rectangle.x;\r\n                        const prevWidth = prevSlot.rectangle.width;\r\n                        const prevEnd = prevX + prevWidth;\r\n                        const currEnd = x + width;\r\n                        if (prevEnd > x) {\r\n                            // Adjust the horizontal position of the current slot to avoid overlap\r\n                            x = prevEnd;\r\n                            width = currEnd - x;\r\n                        }\r\n                    }\r\n                }\r\n                slot.rectangle.x = x;\r\n                slot.rectangle.width = width;\r\n            }\r\n        }\r\n    }\r\n};\r\n","[\r\n    {\r\n         \"id\": \"1\",\r\n         \"start\": \"2023-06-13T09:00:00\",\r\n         \"end\": \"2023-06-13T09:35:00\"\r\n     },\r\n     {\r\n         \"id\": \"4\",\r\n         \"start\": \"2023-06-13T09:35:00\",\r\n         \"end\": \"2023-06-13T10:00:00\"\r\n     }\r\n ]"],"names":["$parcel$interopDefault","a","__esModule","default","$b87b27850b3f4f82$var$_Matrix_instances","$b87b27850b3f4f82$var$_Matrix_createMatrix","$b87b27850b3f4f82$var$_Matrix_initMatrix","$b87b27850b3f4f82$var$_Matrix_setColumns","$b87b27850b3f4f82$var$_Matrix_setVerticalPosition","$b87b27850b3f4f82$var$_Matrix_avoidOverlap","$45d520652af57c94$exports","Object","defineProperty","value","Matrix","Rectangle","Slot","Calendar","$8450d819632f3ef6$exports","$8450d819632f3ef6$var$Rectangle","constructor","x","y","width","height","$8450d819632f3ef6$var$Slot","event","rows","cols","rectangle","minute","start","difference","end","draw","fn","overlaps","other","getTime","date","getHours","getMinutes","events","instance","process","forEach","slot","enumerable","get","$7bb5aa3bacf8b622$exports","$b87b27850b3f4f82$exports","$b87b27850b3f4f82$var$__classPrivateFieldGet","__classPrivateFieldGet","receiver","state","kind","f","TypeError","has","call","add","slots","map","e","assign","Date","sort","e1","e2","matrix","length","i","WeakSet","j","startDate","endDate","t","maxCol","count","filter","cell","Math","max","k","prevSlot","console","log","prevX","prevWidth","prevEnd","currEnd","$b743b85e9e68452d$exports","JSON","parse","$2b6e161c9edcf319$var$calendarDiv","document","getElementById","$2b6e161c9edcf319$var$inputTextarea","$2b6e161c9edcf319$var$drawCalendar","element","input","innerHTML","calendar","clientWidth","clientHeight","_","randomColor","floor","random","div","createElement","style","backgroundColor","padding","position","boxSizing","left","top","border","fontSize","innerText","id","$2b6e161c9edcf319$var$dateToString","append","stringify","addEventListener","target","error","$2b6e161c9edcf319$var$hoursDiv","$2b6e161c9edcf319$var$getHourDiv","hour"],"version":3,"file":"index.fa792929.js.map"}