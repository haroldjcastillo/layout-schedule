!function(e,t,n,r,i){var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof l[r]&&l[r],a=o.cache||{},s="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,n){if(!a[t]){if(!e[t]){var i="function"==typeof l[r]&&l[r];if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(s&&"string"==typeof t)return s(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}f.resolve=function(n){var r=e[t][1][n];return null!=r?r:n},f.cache={};var d=a[t]=new c.Module(t);e[t][0].call(d.exports,f,d,d.exports,this)}return a[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=a,c.parent=o,c.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(c,"root",{get:function(){return l[r]}}),l[r]=c;for(var u=0;u<t.length;u++)c(t[u]);if(n){var d=c(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):i&&(this[i]=d)}}({"2ebq0":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js"),i=e("@hjco/layout-schedule"),l=e("./input.json"),o=r.interopDefault(l);let a=document.getElementById("calendar"),s=document.getElementById("json");function c(e,t){e.innerHTML="",(calendar=new i.Calendar(a.clientWidth,e.clientHeight,t,(e,t,n)=>new i.Matrix(n,e))).draw(function(t){let n=()=>Math.floor(255*Math.random()),r=document.createElement("div");r.style.backgroundColor=`rgba(${n()}, ${n()}, ${n()}, 0.4)`,r.style.padding="2px 0px 0px 2px",r.style.position="absolute",r.style.boxSizing="border-box",r.style.left=`${t.rectangle.x}px`,r.style.top=`${t.rectangle.y}px`,r.style.width=`${t.rectangle.width}px`,r.style.height=`${t.rectangle.height}px`,r.style.border="0.5px solid",r.style.fontSize="12px",r.innerText=`${t.event.id} â†’ ${u(t.event.start)} to ${u(t.event.end)}`,e.append(r)})}function u(e){return`${e.getHours()}:${e.getMinutes()}`}s.value=JSON.stringify(o.default,null,2),c(a,o.default),s.addEventListener("input",e=>{try{let t=JSON.parse(e.target.value);console.log(t.length),c(a,t)}catch(e){console.error(e)}});let d=document.getElementById("hours");for(let e=0;e<24;e++){let t=function(e){let t=document.createElement("div");return t.style.padding="2px 0px 0px 2px",t.style.height="60px",t.style.boxSizing="border-box",t.style.border="0.5px solid",t.innerText=`${e}:00`,t}(e<10?`0${e}`:e);d.append(t)}},{"@hjco/layout-schedule":"2a45N","./input.json":"ln07e","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"2a45N":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Matrix=n.Rectangle=n.Slot=n.Calendar=void 0;var r=e("7db3aa97c164e6f0");Object.defineProperty(n,"Calendar",{enumerable:!0,get:function(){return r.Calendar}}),Object.defineProperty(n,"Slot",{enumerable:!0,get:function(){return r.Slot}}),Object.defineProperty(n,"Rectangle",{enumerable:!0,get:function(){return r.Rectangle}});var i=e("70a800442499160d");Object.defineProperty(n,"Matrix",{enumerable:!0,get:function(){return i.Matrix}})},{"7db3aa97c164e6f0":"cOnJc","70a800442499160d":"cmd4f"}],cOnJc:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Calendar=n.Slot=n.Rectangle=void 0;class r{constructor(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r}}n.Rectangle=r;class i{constructor(e){this.event=e,this.rows=0,this.cols=0,this.rectangle=new r(0,i.minute(e.start),0,i.difference(e.start,e.end))}draw(e){return e(this)}overlaps(e){return this.rectangle.x<e.rectangle.x+e.rectangle.width&&this.rectangle.x+this.rectangle.width>e.rectangle.x&&this.rectangle.y<e.rectangle.y+e.rectangle.height&&this.rectangle.y+this.rectangle.height>e.rectangle.y}static difference(e,t){return(t.getTime()-e.getTime())/1e3/60}static minute(e){return(60*e.getHours()+e.getMinutes())%1440}}n.Slot=i,n.Calendar=class{constructor(e,t,n,r){this.events=n,this.width=e,this.height=t,this.instance=r(this.width,this.height,this.events)}draw(e){this.instance.process().forEach(t=>t.draw(e))}}},{}],cmd4f:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Matrix=void 0;var r=e("8c6e95130dc13c48");Object.defineProperty(n,"Matrix",{enumerable:!0,get:function(){return r.Matrix}})},{"8c6e95130dc13c48":"6Wm1S"}],"6Wm1S":[function(e,t,n){"use strict";var r,i,l,o,a,s,c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.Matrix=void 0;let u=e("d445fd811bb201f5");n.Matrix=class{constructor(e,t){r.add(this),this.events=e,this.width=t,this.width=t,this.slots=e.map(e=>Object.assign(Object.assign({},e),{start:new Date(e.start),end:new Date(e.end)})).sort((e,t)=>e.start.getTime()-t.start.getTime()).sort((e,t)=>e.end.getTime()-t.end.getTime()).map(e=>new u.Slot(e)),this.matrix=c(this,r,"m",i).call(this,1440,this.slots.length)}process(){return this.slots.forEach((e,t)=>c(this,r,"m",l).call(this,this.matrix,e,t)),c(this,r,"m",o).call(this),c(this,r,"m",a).call(this),this.slots}},r=new WeakSet,i=function(e,t){let n=[];for(let r=0;r<e;r++){n[r]=[];for(let e=0;e<t;e++)n[r][e]=null}return n},l=function(e,t,n){let r=u.Slot.minute(t.event.start),i=u.Slot.minute(t.event.end);t.rows=i-r;for(let l=r;l<i;l++)e[l][n]=t},o=function(){let e=0;for(let t=0;t<this.matrix.length;t++){let n=this.matrix[t].filter(e=>null!==e).length;this.matrix[t].filter(e=>null!==e).forEach(e=>e.cols=Math.max(e.cols,n)),n>e&&(e=n),n=0}return e},a=function(){this.matrix.forEach((e,t)=>{let n=0;e.filter(e=>null!==e).forEach(e=>{e.rectangle.x=Math.max(n,e.rectangle.x),e.rectangle.width=this.width/e.cols,n+=e.rectangle.width})}),c(this,r,"m",s).call(this)},s=function(){let e=this.matrix.length,t=this.matrix[0].length;for(let n=0;n<e;n++)for(let e=0;e<t;e++){let t=this.matrix[n][e];if(t){let r=t.rectangle.x,i=t.rectangle.width;for(let l=e-1;l>=0;l--){let e=this.matrix[n][l];if(null!==e&&t.overlaps(e)){console.log(e,t);let n=e.rectangle.x,l=e.rectangle.width,o=n+l,a=r+i;o>r&&(i=a-(r=o))}}t.rectangle.x=r,t.rectangle.width=i}}}},{d445fd811bb201f5:"2a45N"}],ln07e:[function(e,t,n){t.exports=JSON.parse('[{"id":"1","start":"2023-06-13T09:00:00","end":"2023-06-13T09:35:00"},{"id":"4","start":"2023-06-13T09:35:00","end":"2023-06-13T10:00:00"}]')},{}],k3151:[function(e,t,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,t){return Object.keys(e).forEach(function(n){"default"===n||"__esModule"===n||t.hasOwnProperty(n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}),t},n.export=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:n})}},{}]},["2ebq0"],"2ebq0","parcelRequire8f3b");
//# sourceMappingURL=index.d16c090e.js.map
