function t(t){return t&&t.__esModule?t.default:t}"use strict";var e,r,n,i,l,a,s={};"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Matrix=s.Rectangle=s.Slot=s.Calendar=void 0;var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.Calendar=o.Slot=o.Rectangle=void 0;class c{constructor(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}}o.Rectangle=c;class h{constructor(t){this.event=t,this.rows=0,this.cols=0,this.rectangle=new c(0,h.minute(t.start),0,h.difference(t.start,t.end))}draw(t){return t(this)}overlaps(t){return this.rectangle.x<t.rectangle.x+t.rectangle.width&&this.rectangle.x+this.rectangle.width>t.rectangle.x&&this.rectangle.y<t.rectangle.y+t.rectangle.height&&this.rectangle.y+this.rectangle.height>t.rectangle.y}static difference(t,e){return(e.getTime()-t.getTime())/1e3/60}static minute(t){return(60*t.getHours()+t.getMinutes())%1440}}"use strict";o.Slot=h,o.Calendar=class{constructor(t,e,r,n){this.events=r,this.width=t,this.height=e,this.instance=n(this.width,this.height,this.events)}draw(t){this.instance.process().forEach(e=>e.draw(t))}},Object.defineProperty(s,"Calendar",{enumerable:!0,get:function(){return o.Calendar}}),Object.defineProperty(s,"Slot",{enumerable:!0,get:function(){return o.Slot}}),Object.defineProperty(s,"Rectangle",{enumerable:!0,get:function(){return o.Rectangle}});var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.Matrix=void 0;var u={},g=u&&u.__classPrivateFieldGet||function(t,e,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};Object.defineProperty(u,"__esModule",{value:!0}),u.Matrix=void 0,u.Matrix=class{constructor(t,n){e.add(this),this.events=t,this.width=n,this.width=n,this.slots=t.map(t=>Object.assign(Object.assign({},t),{start:new Date(t.start),end:new Date(t.end)})).sort((t,e)=>t.start.getTime()-e.start.getTime()).sort((t,e)=>t.end.getTime()-e.end.getTime()).map(t=>new s.Slot(t)),this.matrix=g(this,e,"m",r).call(this,1440,this.slots.length)}process(){return this.slots.forEach((t,r)=>g(this,e,"m",n).call(this,this.matrix,t,r)),g(this,e,"m",i).call(this),g(this,e,"m",l).call(this),this.slots}},e=new WeakSet,r=function(t,e){let r=[];for(let n=0;n<t;n++){r[n]=[];for(let t=0;t<e;t++)r[n][t]=null}return r},n=function(t,e,r){let n=s.Slot.minute(e.event.start),i=s.Slot.minute(e.event.end);e.rows=i-n;for(let l=n;l<i;l++)t[l][r]=e},i=function(){let t=0;for(let e=0;e<this.matrix.length;e++){let r=this.matrix[e].filter(t=>null!==t).length;this.matrix[e].filter(t=>null!==t).forEach(t=>t.cols=Math.max(t.cols,r)),r>t&&(t=r),r=0}return t},l=function(){this.matrix.forEach((t,e)=>{let r=0;t.filter(t=>null!==t).forEach(t=>{t.rectangle.x=Math.max(r,t.rectangle.x),t.rectangle.width=this.width/t.cols,r+=t.rectangle.width})}),g(this,e,"m",a).call(this)},a=function(){let t=this.matrix.length,e=this.matrix[0].length;for(let r=0;r<t;r++)for(let t=0;t<e;t++){let e=this.matrix[r][t];if(e){let n=e.rectangle.x,i=e.rectangle.width;for(let l=t-1;l>=0;l--){let t=this.matrix[r][l];if(null!==t&&e.overlaps(t)){console.log(t,e);let r=t.rectangle.x,l=t.rectangle.width,a=r+l,s=n+i;a>n&&(i=s-(n=a))}}e.rectangle.x=n,e.rectangle.width=i}}},Object.defineProperty(d,"Matrix",{enumerable:!0,get:function(){return u.Matrix}}),Object.defineProperty(s,"Matrix",{enumerable:!0,get:function(){return d.Matrix}});var f={};f=JSON.parse('[{"id":"1","start":"2023-06-13T09:00:00","end":"2023-06-13T09:35:00"},{"id":"4","start":"2023-06-13T09:35:00","end":"2023-06-13T10:00:00"}]');const x=document.getElementById("calendar"),m=document.getElementById("json");function p(t,e){t.innerHTML="",(calendar=new s.Calendar(x.clientWidth,t.clientHeight,e,(t,e,r)=>new s.Matrix(r,t))).draw(function(e){let r=()=>Math.floor(255*Math.random()),n=document.createElement("div");n.style.backgroundColor=`rgba(${r()}, ${r()}, ${r()}, 0.4)`,n.style.padding="2px 0px 0px 2px",n.style.position="absolute",n.style.boxSizing="border-box",n.style.left=`${e.rectangle.x}px`,n.style.top=`${e.rectangle.y}px`,n.style.width=`${e.rectangle.width}px`,n.style.height=`${e.rectangle.height}px`,n.style.border="0.5px solid",n.style.fontSize="12px",n.innerText=`${e.event.id} â†’ ${y(e.event.start)} to ${y(e.event.end)}`,t.append(n)})}function y(t){return`${t.getHours()}:${t.getMinutes()}`}m.value=JSON.stringify(t(f),null,2),p(x,t(f)),m.addEventListener("input",t=>{try{let e=JSON.parse(t.target.value);console.log(e.length),p(x,e)}catch(t){console.error(t)}});const v=document.getElementById("hours");for(let t=0;t<24;t++){let e=function(t){let e=document.createElement("div");return e.style.padding="2px 0px 0px 2px",e.style.height="60px",e.style.boxSizing="border-box",e.style.border="0.5px solid",e.innerText=`${t}:00`,e}(t<10?`0${t}`:t);v.append(e)}
//# sourceMappingURL=index.fa792929.js.map
